/*
  Water level sensor and water pump

*/

const int WS_Power = 3; // defining the water sensor to pin 3
const int WS_Read = A0; // defining the water sensor measure to A0
int waterValue = 0;  // defining the constant waterValue

const int WP_Power = 5; // defining the water pump to pin 5

int WATER_MAX = 370;
int WATER_MIN  = 307;

void setup() {
  
  Serial.begin(9600);    

  pinMode(WS_Power, OUTPUT);   // defines pin 3 as OUTPUT
  pinMode(WP_Power, OUTPUT);   // defines pin 3 as OUTPUT
  digitalWrite(WS_Power, LOW); // turns the  water sensor OFF
  digitalWrite(WP_Power, LOW); // turns the water pump OFF
  
}

void loop() {
  // put your main code here, to run repeatedly:

  digitalWrite(WS_Power, HIGH);  // turn the sensor ON
  delay(10);        
               
  waterValue = analogRead(WS_Read); // read the analog value from sensor
  digitalWrite(WS_Power, LOW);   // turn the sensor OFF

  if (WATER_MIN >= waterValue) {
    
    digitalWrite(WP_Power, HIGH); // turn the water pump ON
    
    while(waterValue < WATER_MAX) {
      digitalWrite(WS_Power, HIGH);  // turn the sensor ON
      delay(10);    
      waterValue = analogRead(WS_Read); // read the analog value from sensor
      digitalWrite(WS_Power, LOW); // turn the sensor OFF

      Serial.print("motor on: "); // for configuration - delete this
      Serial.println(waterValue); // for configuration - delete this

      delay(500); 
    }

    digitalWrite(WP_Power, LOW); // turns the water pump OFF  
      
  }

  Serial.print("motor off: "); // for configuration - delete this
  Serial.println(waterValue); // for configuration - delete this


  delay(5000); // The water disappears slowly, so few measurements are taken

}
